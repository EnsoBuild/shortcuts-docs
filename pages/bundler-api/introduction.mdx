import { Callout } from "nextra/components";
import Image from "next/image";
import gas from "../../assets/gas.png";

## What is the Bundle API?

The Bundle API is a powerful tool within the Enso API suite that lets developers pack several DeFi actions into one single transaction. This REST API is designed for simplicity and effectiveness.
With just one API call, you can trigger several operations, making your interaction with various DeFi simpler and cheaper.

The Bundle API excels in gas optimization. The more transactions you bundle, the more you can save on gas fees. This makes it an economical choice for users seeking to execute multiple operations efficiently in the DeFi space.

<Callout type="info" emoji="ðŸ’¡">
  Only delegate call transactions are supported with Bundle API
</Callout>

### Seamless Multi-Protocol Bundling

From entering and exiting positions to multi-token swaps, the Bundle API supports bundling across a wide range of DeFi protocols, including:

- Liquidity pools
- Lending platforms
- Automated market makers (AMMs)
- Yield optimizers
- And more

The Bundle API takes care of optimizing the execution sequence and estimating the gas costs for the bundled actions, providing users with a clear picture of the transaction before execution.

## Gas Savings

More transactions bundled together means more gas savings. The Bundle API is designed to optimize the execution sequence of the bundled actions, which can result in significant gas savings:

<br></br>

<Image src={gas} alt="Gas Chart" width={700} />

---

<Callout type="info" emoji="ðŸ’¡">
  Try out the bundle
</Callout>

ðŸ‘‰ Run this `curl` request to see a live route response for swapping ETH to USDC and supplying USDC into Aave V3

```bash copy
curl -X POST \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer 1e02632d-6feb-4a75-a157-documentation' \
  -d '[
    {
      "protocol": "enso",
      "action": "route",
      "args": {
        "tokenIn": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",
        "tokenOut": "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",
        "amountIn": "1000000000"
      }
    },
    {
      "protocol": "aave-v3",
      "action": "deposit",
      "args": {
        "tokenIn": "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",
        "tokenOut": "0xbcca60bb61934080951369a648fb03df4f96263c",
        "amountIn": { "useOutputOfCallAt": 0 },
        "primaryAddress": "0x87870Bca3F3fD6335C3F4ce8392D69350B4fA4E2"
      }
    }
  ]' \
  'https://api.enso.finance/api/v1/shortcuts/bundle?chainId=1&fromAddress=0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045'
```

ðŸ‘‰ Or try it out in the [Swagger UI](https://api.enso.finance/api#/shortcuts/BundleController_bundleShortcutTransaction)

#### Details

Suppose you want to supply USDC into Aave V3, but you only have ETH.
To achieve this, use the `bundle` endpoint and provide:

- `route` action that swaps ETH to USDC
- `aave-v3 deposit` action that supplies the USDC into Aave V3

Enso will handle the entire process:

- Swapping ETH for the required token
- Supplying token into Aave V3
